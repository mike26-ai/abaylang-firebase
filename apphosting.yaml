
# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# The version of the App Hosting runtime.
# We recommend using the latest major version.
runtime: nodejs18 # Or nodejs20, depending on your Next.js version and preferences

# buildSteps allows you to install dependencies and build your static assets.
# These commands are executed on the server during every new deployment.
# Npm is used by default, but you can specify pnpm or yarn via packageManager.
buildSteps:
  - run: npm install 
  - run: npm run build 

# Settings for the server that serves your app.
# https://firebase.google.com/docs/app-hosting/configure#server-settings
runConfig:
  # App Hosting uses Cloud Run instances to run your application.
  # You can specify the CPU and memory of these instances.
  # Default: 0.5 CPU, 512MiB memory
  # cpu: 1
  # memoryMiB: 1024
  # The maximum number of instances that can be started to handle requests.
  # Default: 100
  maxInstances: 2 # Keep low for MVP / cost control, adjust based on traffic
  # The minimum number of instances that will be kept warm to reduce cold starts.
  # Default: 0
  # minInstances: 0
  # The number of concurrent requests an instance can receive.
  # Default: 80
  # concurrency: 80

# Defines environment variables that will be available at build time and runtime.
# https://firebase.google.com/docs/app-hosting/configure#environment-variables
env:
  - variable: NEXT_PUBLIC_ADMIN_EMAIL
    value: "mahdernmamo@gmail.com" # Admin email for the site
  - variable: NEXT_PUBLIC_RECAPTCHA_SITE_KEY
    value: "YOUR_RECAPTCHA_SITE_KEY_HERE" # TODO: Replace with your actual Site Key from Google reCAPTCHA admin.
#  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
#    secret: FIREBASE_API_KEY # Example for secrets from Secret Manager
#  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
#    secret: FIREBASE_AUTH_DOMAIN
#  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
#    secret: FIREBASE_PROJECT_ID
#  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
#    secret: FIREBASE_STORAGE_BUCKET
#  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
#    secret: FIREBASE_MESSAGING_SENDER_ID
#  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
#    secret: FIREBASE_APP_ID
# It's generally recommended to use Secret Manager for sensitive env vars.
# For non-sensitive NEXT_PUBLIC_ variables, you can define them here or
# ensure they are set during the build process if your CI/CD handles it.
# If NEXT_PUBLIC_ variables are already in your .env files and committed (not recommended for secrets),
# Next.js might pick them up during the build on App Hosting.
# For MVP, ensure these are available at runtime for Firebase SDK initialization on the client.
# If these are not available as secrets, you can set them directly (not recommended for API keys).
# Example (less secure, use secrets if possible):
#  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
#    value: "your_actual_api_key_here"

    
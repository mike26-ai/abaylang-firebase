# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# The version of the App Hosting runtime.
# We recommend using the latest major version.
runtime: nodejs20

# buildSteps allows you to install dependencies and build your static assets.
# These commands are executed on the server during every new deployment.
# Npm is used by default, but you can specify pnpm or yarn via packageManager.
buildSteps:
  - run: npm install
  - run: npm run build

# Settings for the server that serves your app.
# https://firebase.google.com/docs/app-hosting/configure#server-settings
runConfig:
  # The maximum number of instances that can be started to handle requests.
  # Default: 100
  maxInstances: 2 # Keep low for MVP / cost control, adjust based on traffic

# Defines environment variables that will be available at build time and runtime.
# https://firebase.google.com/docs/app-hosting/configure#environment-variables
env:
  # --- Public Variables ---
  - variable: NEXT_PUBLIC_ADMIN_EMAIL
    value: "mahdernmamo@gmail.com"
  # --- Server-Side Secrets ---
  # These are securely referenced from Google Cloud Secret Manager.
  - variable: PADDLE_API_KEY
    secret: PADDLE_API_KEY
  - variable: PADDLE_WEBHOOK_SECRET
    secret: PADDLE_WEBHOOK_SECRET
  - variable: ADMIN_FIREBASE_PROJECT_ID
    secret: ADMIN_FIREBASE_PROJECT_ID
  - variable: ADMIN_FIREBASE_CLIENT_EMAIL
    secret: ADMIN_FIREBASE_CLIENT_EMAIL
  - variable: ADMIN_FIREBASE_PRIVATE_KEY
    secret: ADMIN_FIREBASE_PRIVATE_KEY

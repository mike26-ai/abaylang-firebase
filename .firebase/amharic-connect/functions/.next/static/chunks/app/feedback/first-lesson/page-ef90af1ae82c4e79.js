(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6157],{97701:function(e,t,s){Promise.resolve().then(s.bind(s,39103))},39103:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(57437),i=s(2265),n=s(87786),r=s(16463),o=s(48185),l=s(89733),c=s(70402),u=s(4919),d=s(87080),m=s(91892),p=s(86763),f=s(31668),h=s(69842),x=s(89506);function b(){let{user:e,loading:t}=(0,n.a)(),s=(0,r.useRouter)(),{toast:b}=(0,p.pm)(),[S,y]=(0,i.useState)(0),[v,N]=(0,i.useState)(0),[T,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t||e||s.push("/login?callbackUrl=/feedback/first-lesson")},[e,t,s]);let j=async t=>{if(!e){b({title:"Error",description:"You must be logged in.",variant:"destructive"});return}if(0===S){b({title:"Incomplete",description:"Please select a rating.",variant:"destructive"});return}g(!0),t.append("userId",e.uid),t.append("userName",e.displayName||"Anonymous"),t.append("userEmail",e.email||"");try{await (0,f.c)(t);let a=(0,h.JU)(x.db,"users",e.uid);await (0,h.r7)(a,{showFirstLessonFeedbackPrompt:!1,hasSubmittedFirstLessonFeedback:!0}),b({title:"Feedback Submitted!",description:"Thank you for helping us improve."}),s.push("/profile")}catch(e){console.error("Error submitting first lesson feedback:",e),b({title:"Submission Failed",description:e.message||"Could not submit your feedback. Please try again.",variant:"destructive"})}finally{g(!1)}};return t||!e?(0,a.jsx)("div",{className:"flex min-h-[calc(100vh-8rem)] items-center justify-center",children:(0,a.jsx)(m.$,{size:"lg"})}):(0,a.jsx)("div",{className:"container mx-auto max-w-2xl py-12",children:(0,a.jsxs)(o.Zb,{className:"shadow-lg",children:[(0,a.jsxs)(o.Ol,{className:"text-center",children:[(0,a.jsx)(o.ll,{className:"text-3xl",children:"How was your first lesson?"}),(0,a.jsx)(o.SZ,{children:"Your private feedback is valuable and helps us improve the experience for everyone."})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("form",{action:j,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-2 text-center",children:[(0,a.jsx)(c._,{htmlFor:"rating",className:"text-lg",children:"Your Overall Rating"}),(0,a.jsx)("input",{type:"hidden",name:"rating",value:S}),(0,a.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",onMouseEnter:()=>N(e),onMouseLeave:()=>N(0),onClick:()=>y(e),className:"p-1 transition-transform hover:scale-110",children:(0,a.jsx)(d.Z,{className:"h-10 w-10 transition-colors ".concat(e<=(v||S)?"text-yellow-400 fill-yellow-400":"text-muted-foreground/30")})},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"comment",className:"text-lg",children:"Your Comments (Optional)"}),(0,a.jsx)(u.g,{id:"comment",name:"comment",rows:8,placeholder:"What went well? What could be better? Any specific feedback for your tutor?",className:"resize-none"})]}),(0,a.jsxs)(l.z,{type:"submit",size:"lg",className:"w-full",disabled:T,children:[T?(0,a.jsx)(m.$,{size:"sm",className:"mr-2"}):null,T?"Submitting...":"Submit Private Feedback"]})]})})]})})}},86763:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let i=0,n=new Map,r=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function u(e){c=o(c,e),l.forEach(e=>{e(c)})}function d(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[4358,139,6244,537,4275,2971,7023,1744],function(){return e(e.s=97701)}),_N_E=e.O()}]);
(()=>{var e={};e.id=6157,e.ids=[6157],e.modules={92509:e=>{"use strict";e.exports=require("firebase-admin")},65877:e=>{"use strict";e.exports=require("firebase-admin/auth")},12594:e=>{"use strict";e.exports=require("firebase-admin/firestore")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},24418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(37080),r(96873),r(7629),r(12523);var s=r(23191),i=r(88716),a=r(37922),n=r.n(a),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["feedback",{children:["first-lesson",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37080)),"/home/user/studio/src/app/feedback/first-lesson/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,96873)),"/home/user/studio/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"/home/user/studio/src/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"/home/user/studio/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/home/user/studio/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/user/studio/src/app/feedback/first-lesson/page.tsx"],u="/feedback/first-lesson/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/feedback/first-lesson/page",pathname:"/feedback/first-lesson",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43229:(e,t,r)=>{let s={"896ac2a5cbf1337f4326a498e8a75f67d53963a7":()=>Promise.resolve().then(r.bind(r,96543)).then(e=>e.submitTestimonialAction)};async function i(e,...t){return(await s[e]()).apply(null,t)}e.exports={"896ac2a5cbf1337f4326a498e8a75f67d53963a7":i.bind(null,"896ac2a5cbf1337f4326a498e8a75f67d53963a7")}},8456:(e,t,r)=>{Promise.resolve().then(r.bind(r,5342))},31625:(e,t,r)=>{"use strict";r.d(t,{c:()=>s}),r(15424);var s=(0,r(46242).$)("896ac2a5cbf1337f4326a498e8a75f67d53963a7")},5342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(10326),i=r(17577),a=r(49260),n=r(35047),o=r(29752),l=r(91664),c=r(44794),d=r(82015),u=r(23675),p=r(45800),m=r(84097),f=r(31625),x=r(76),h=r(90445);function b(){let{user:e,loading:t}=(0,a.a)(),r=(0,n.useRouter)(),{toast:b}=(0,m.pm)(),[g,v]=(0,i.useState)(0),[y,w]=(0,i.useState)(0),[j,E]=(0,i.useState)(!1),P=async t=>{if(!e){b({title:"Error",description:"You must be logged in.",variant:"destructive"});return}if(0===g){b({title:"Incomplete",description:"Please select a rating.",variant:"destructive"});return}E(!0),t.append("userId",e.uid),t.append("userName",e.displayName||"Anonymous"),t.append("userEmail",e.email||"");try{await (0,f.c)(t);let s=(0,x.JU)(h.db,"users",e.uid);await (0,x.r7)(s,{showFirstLessonFeedbackPrompt:!1,hasSubmittedFirstLessonFeedback:!0}),b({title:"Feedback Submitted!",description:"Thank you for helping us improve."}),r.push("/profile")}catch(e){console.error("Error submitting first lesson feedback:",e),b({title:"Submission Failed",description:e.message||"Could not submit your feedback. Please try again.",variant:"destructive"})}finally{E(!1)}};return t||!e?s.jsx("div",{className:"flex min-h-[calc(100vh-8rem)] items-center justify-center",children:s.jsx(p.$,{size:"lg"})}):s.jsx("div",{className:"container mx-auto max-w-2xl py-12",children:(0,s.jsxs)(o.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(o.Ol,{className:"text-center",children:[s.jsx(o.ll,{className:"text-3xl",children:"How was your first lesson?"}),s.jsx(o.SZ,{children:"Your private feedback is valuable and helps us improve the experience for everyone."})]}),s.jsx(o.aY,{children:(0,s.jsxs)("form",{action:P,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-2 text-center",children:[s.jsx(c._,{htmlFor:"rating",className:"text-lg",children:"Your Overall Rating"}),s.jsx("input",{type:"hidden",name:"rating",value:g}),s.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>s.jsx("button",{type:"button",onMouseEnter:()=>w(e),onMouseLeave:()=>w(0),onClick:()=>v(e),className:"p-1 transition-transform hover:scale-110",children:s.jsx(u.Z,{className:`h-10 w-10 transition-colors ${e<=(y||g)?"text-yellow-400 fill-yellow-400":"text-muted-foreground/30"}`})},e))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"comment",className:"text-lg",children:"Your Comments (Optional)"}),s.jsx(d.g,{id:"comment",name:"comment",rows:8,placeholder:"What went well? What could be better? Any specific feedback for your tutor?",className:"resize-none"})]}),(0,s.jsxs)(l.z,{type:"submit",size:"lg",className:"w-full",disabled:j,children:[j?s.jsx(p.$,{size:"sm",className:"mr-2"}):null,j?"Submitting...":"Submit Private Feedback"]})]})})]})})}},44794:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(10326),i=r(17577),a=r(34478),n=r(79360),o=r(51223);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(({className:e,...t},r)=>s.jsx(a.f,{ref:r,className:(0,o.cn)(l(),e),...t}));c.displayName=a.f.displayName},45800:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var s=r(10326),i=r(46721),a=r(51223);function n({className:e,size:t="md"}){return s.jsx(i.Z,{className:(0,a.cn)("animate-spin text-primary",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t],e)})}},82015:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var s=r(10326),i=r(17577),a=r(51223);let n=i.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Textarea"},96543:(e,t,r)=>{"use strict";r.r(t),r.d(t,{submitTestimonialAction:()=>u});var s=r(27745);r(26461);var i=r(91035),a=r(12594),n=r(65877),o=r(30266),l=r(74739),c=r(30207),d=r(53973);async function u(e){let t=e.get("rating"),r=e.get("comment"),s=parseInt(t,10),u=(0,o.initAdmin)();(0,n.getAuth)(u);let p=(0,a.getFirestore)(u);(await (0,d.headers)()).get("Authorization");let m=e.get("userId"),f=e.get("userName"),x=e.get("userEmail");if(!m)throw Error("You must be logged in to submit a testimonial.");if(!s||s<1||s>5||!r)throw Error("Invalid rating or comment.");try{await p.collection("testimonials").add({userId:m,name:f||"Anonymous",userEmail:x,rating:s,comment:r,status:"pending",createdAt:(0,i.serverTimestamp)()})}catch(e){throw console.error("Error saving testimonial to Firestore:",e),Error("Could not save your testimonial. Please try again later.")}(0,c.revalidatePath)("/testimonials"),(0,c.revalidatePath)("/admin/dashboard"),(0,l.redirect)("/submit-testimonial/success")}(0,r(85723).ensureServerEntryExports)([u]),(0,s.registerServerReference)("896ac2a5cbf1337f4326a498e8a75f67d53963a7",u)},37080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var s=r(68570);let i=(0,s.createProxy)(String.raw`/home/user/studio/src/app/feedback/first-lesson/page.tsx`),{__esModule:a,$$typeof:n}=i;i.default;let o=(0,s.createProxy)(String.raw`/home/user/studio/src/app/feedback/first-lesson/page.tsx#default`)},30266:(e,t,r)=>{"use strict";r.d(t,{initAdmin:()=>a});var s=r(92509),i=r.n(s);function a(){if(i().apps.length>0)return i().app();let e={projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:(process.env.FIREBASE_PRIVATE_KEY||"").replace(/\\n/g,"\n")};if(!e.projectId||!e.clientEmail||!e.privateKey){let e="CRITICAL: Firebase Admin SDK credentials are not set correctly in environment variables. Check your .env file or hosting configuration.";throw console.error(e),Error(e)}try{let t=i().initializeApp({credential:i().credential.cert(e)});return console.log("Firebase Admin SDK initialized successfully."),t}catch(e){if(console.error("CRITICAL: Firebase admin initialization error:",e.message),"app/invalid-credential"===e.code)throw Error("Could not initialize Firebase Admin SDK. The provided credentials are invalid or malformed.");throw Error("Could not initialize Firebase Admin SDK. Please check server logs for details.")}}i().firestore.Timestamp,a(),i().firestore(),i().auth()}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,4623,4458,5330],()=>r(24418));module.exports=s})();
(()=>{var e={};e.id=5926,e.ids=[5926],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},59478:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(61523),r(96873),r(7629),r(12523);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,61523)),"/home/user/studio/src/app/bookings/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,96873)),"/home/user/studio/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"/home/user/studio/src/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"/home/user/studio/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/home/user/studio/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/user/studio/src/app/bookings/page.tsx"],u="/bookings/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/bookings/page",pathname:"/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},60713:(e,t,r)=>{Promise.resolve().then(r.bind(r,50843))},50843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ej});var s=r(10326),a=r(17577),i=r(91664),n=r(29752),o=r(38443),l=r(82561),c=r(48051),d=r(93095),u=r(45226),m=r(15594),p=r(52067),x=r(17124),f=r(2566),h=r(53405),g=r(9815),v="Radio",[b,y]=(0,d.b)(v),[j,N]=b(v),k=a.forwardRef((e,t)=>{let{__scopeRadio:r,name:i,checked:n=!1,required:o,disabled:d,value:m="on",onCheck:p,form:x,...f}=e,[h,g]=a.useState(null),v=(0,c.e)(t,e=>g(e)),b=a.useRef(!1),y=!h||x||!!h.closest("form");return(0,s.jsxs)(j,{scope:r,checked:n,disabled:d,children:[(0,s.jsx)(u.WV.button,{type:"button",role:"radio","aria-checked":n,"data-state":C(n),"data-disabled":d?"":void 0,disabled:d,value:m,...f,ref:v,onClick:(0,l.Mj)(e.onClick,e=>{n||p?.(),y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),y&&(0,s.jsx)(_,{control:h,bubbles:!b.current,name:i,value:m,checked:n,required:o,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});k.displayName=v;var w="RadioIndicator",P=a.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...i}=e,n=N(w,r);return(0,s.jsx)(g.z,{present:a||n.checked,children:(0,s.jsx)(u.WV.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t})})});P.displayName=w;var _=a.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:i=!0,...n},o)=>{let l=a.useRef(null),d=(0,c.e)(l,o),m=(0,h.D)(r),p=(0,f.t)(t);return a.useEffect(()=>{let e=l.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[m,r,i]),(0,s.jsx)(u.WV.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:d,style:{...n.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function C(e){return e?"checked":"unchecked"}_.displayName="RadioBubbleInput";var D=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S="RadioGroup",[E,I]=(0,d.b)(S,[m.Pc,y]),q=(0,m.Pc)(),L=y(),[T,A]=E(S),U=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:i,value:n,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:f=!0,onValueChange:h,...g}=e,v=q(r),b=(0,x.gm)(d),[y,j]=(0,p.T)({prop:n,defaultProp:i??null,onChange:h,caller:S});return(0,s.jsx)(T,{scope:r,name:a,required:o,disabled:l,value:y,onValueChange:j,children:(0,s.jsx)(m.fC,{asChild:!0,...v,orientation:c,dir:b,loop:f,children:(0,s.jsx)(u.WV.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...g,ref:t})})})});U.displayName=S;var R="RadioGroupItem",B=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:i,...n}=e,o=A(R,r),d=o.disabled||i,u=q(r),p=L(r),x=a.useRef(null),f=(0,c.e)(t,x),h=o.value===n.value,g=a.useRef(!1);return a.useEffect(()=>{let e=e=>{D.includes(e.key)&&(g.current=!0)},t=()=>g.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,s.jsx)(m.ck,{asChild:!0,...u,focusable:!d,active:h,children:(0,s.jsx)(k,{disabled:d,required:o.required,checked:h,...p,...n,name:o.name,ref:f,onCheck:()=>o.onValueChange(n.value),onKeyDown:(0,l.Mj)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,l.Mj)(n.onFocus,()=>{g.current&&x.current?.click()})})})});B.displayName=R;var $=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,i=L(r);return(0,s.jsx)(P,{...i,...a,ref:t})});$.displayName="RadioGroupIndicator";var O=r(94426),M=r(51223);let Z=a.forwardRef(({className:e,...t},r)=>s.jsx(U,{className:(0,M.cn)("grid gap-2",e),...t,ref:r}));Z.displayName=U.displayName;let H=a.forwardRef(({className:e,...t},r)=>s.jsx(B,{ref:r,className:(0,M.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx($,{className:"flex items-center justify-center",children:s.jsx(O.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));H.displayName=B.displayName;var z=r(44794),F=r(82015),G=r(9921),W=r(79460),Y=r(70744),X=r(60883),V=r(72669),Q=r(79611),K=r(28096),J=r(23675),ee=r(21123),et=r(90434),er=r(35047),es=r(49260),ea=r(84097),ei=r(46951),en=r(13341),eo=r(87396),el=r(99515),ec=r(64414),ed=r(34075),eu=r(45800),em=r(63993),ep=r(92652);let ex={freeTrial:"price_free_trial",quickPractice:process.env.NEXT_PUBLIC_PADDLE_QUICK_PRACTICE_ID||"pri_01k42rzjr37b3gbnm57gy73q0n",comprehensiveLesson:process.env.NEXT_PUBLIC_PADDLE_COMPREHENSIVE_LESSON_ID||"pri_01k42s7crjg5qaqybyk5ysytzh",quickGroupConversation:process.env.NEXT_PUBLIC_PADDLE_QUICK_GROUP_ID||"pri_01k42sbb9nyg3k7ndn2ngn7vsb",immersiveConversationPractice:process.env.NEXT_PUBLIC_PADDLE_IMMERSIVE_GROUP_ID||"pri_01k42sdr84bmrpv6edh0qzjxwq",quickPracticeBundle:process.env.NEXT_PUBLIC_PADDLE_QUICK_BUNDLE_ID||"pri_01k42shrqkf5ysnx2t92wg087y",learningIntensive:process.env.NEXT_PUBLIC_PADDLE_INTENSIVE_BUNDLE_ID||"pri_01k42skf5mnag80gqgkkxwsq1k",starterBundle:process.env.NEXT_PUBLIC_PADDLE_STARTER_BUNDLE_ID||"pri_01k42snac1aqw30bqsx3y694gq",foundationPack:process.env.NEXT_PUBLIC_PADDLE_FOUNDATION_PACK_ID||"pri_01k42sptq9716bknset0x62ep1"};var ef=r(19740),eh=r(90445);async function eg(e){let t=eh.I.currentUser;if(!t)throw Error("Authentication required to create a booking.");if(t.uid!==e.userId)throw Error("User mismatch. Cannot create booking for another user.");let r=await t.getIdToken();try{let t=await fetch("/api/bookings/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(e)}),s=await t.json();if(!t.ok||!s.success)throw Error(s.message||"Failed to create booking.");return s}catch(e){throw e}}var ev=r(23137);function eb({selectedDate:e,onDateSelect:t}){let[r,n]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0);return o?s.jsx("div",{className:"flex justify-center items-center h-48",children:s.jsx(eu.$,{})}):s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-3",children:r.map(r=>(0,s.jsxs)(i.z,{variant:e&&(0,eo.X)((0,el.b)(e),r)?"default":"outline",className:"p-4 h-auto flex flex-col",onClick:()=>t(r),disabled:(0,en.C)(r)&&!(0,eo.X)((0,el.b)(r),(0,el.b)(new Date)),children:[s.jsx("div",{className:"text-sm",children:(0,ei.WU)(r,"E")}),s.jsx("div",{className:"font-semibold",children:(0,ei.WU)(r,"MMM d")})]},r.toISOString()))})}let ey=(()=>{let e=[],t=new Date;for(let r=0;r<24;r++)for(let s=0;s<60;s+=30)e.push((0,ei.WU)(new Date(t.setHours(r,s,0,0)),"HH:mm"));return e})();function ej(){let{user:e}=(0,es.a)(),{toast:t}=(0,ea.pm)(),r=(0,er.useRouter)(),l=(0,er.useSearchParams)().get("type"),c=[{value:"free-trial",label:"Free Trial",duration:30,price:0,description:"One-time only trial to meet the tutor",features:["Meet the tutor","Experience teaching style","Discuss learning goals"],type:"individual"},{value:"quick-practice",label:"Quick Practice",duration:30,price:9,description:"Perfect for conversation practice",features:["Conversation practice","Pronunciation correction","Quick grammar review"],type:"individual"},{value:"comprehensive-lesson",label:"Comprehensive Lesson",duration:60,price:16,description:"Structured learning session",features:["Structured lesson plan","Cultural context & stories","Homework & materials"],type:"individual"},{value:"quick-group-conversation",label:"Quick Group Conversation",duration:30,price:7,description:"Practice with fellow learners",features:["Small group setting (4-6)","Focused conversation","Peer learning experience"],type:"group",minStudents:4,maxStudents:6},{value:"immersive-conversation-practice",label:"Immersive Conversation Practice",duration:60,price:12,description:"Deeper conversation and cultural insights",features:["Extended conversation time","In-depth cultural topics","Collaborative learning"],type:"group",minStudents:4,maxStudents:6},{value:"quick-practice-bundle",label:"Quick Practice Bundle",duration:"10 x 30-min",price:50,originalPrice:70,totalLessons:10,unitDuration:30,description:"10 conversation practice sessions",features:["10 lessons, 30 mins each","Just $5 per lesson","Focus on speaking fluency","Flexible scheduling"],type:"package"},{value:"learning-intensive",label:"Learning Intensive",duration:"10 x 60-min",price:100,originalPrice:150,totalLessons:10,unitDuration:60,description:"Accelerate your structured learning",features:["10 lessons, 60 mins each","Just $10 per lesson","Comprehensive curriculum","Priority booking"],type:"package"},{value:"starter-bundle",label:"Starter Bundle",duration:"5 x 30-min",price:25,originalPrice:35,totalLessons:5,unitDuration:30,description:"Start practicing conversation regularly",features:["5 lessons, 30 mins each","Great value to get started","Build conversational confidence"],type:"package"},{value:"foundation-pack",label:"Foundation Pack",duration:"5 x 60-min",price:60,originalPrice:75,totalLessons:5,unitDuration:60,description:"Build a solid foundation",features:["5 lessons, 60 mins each","Perfect for beginners","Covers core concepts"],type:"package"}],[d,u]=(0,a.useState)(l&&c.some(e=>e.value===l)?l:"comprehensive-lesson"),[m,p]=(0,a.useState)(void 0),[x,f]=(0,a.useState)(void 0),[h,g]=(0,a.useState)(""),[v,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)([]),[N,k]=(0,a.useState)([]),[w,P]=(0,a.useState)(!1),_=c.find(e=>e.value===d),C=async e=>{P(!0),(0,ef.lm)(e).then(({bookings:e,timeOff:t})=>{j(e),k(t||[]),f(void 0)}).catch(e=>{console.error("Failed to get availability data:",e),t({title:"Error",description:"Could not fetch available slots.",variant:"destructive"})}).finally(()=>{P(!1)})},D=e=>{e&&(0,en.C)(e)&&!(0,eo.X)((0,el.b)(e),(0,el.b)(new Date))?(t({title:"Invalid Date",description:"Cannot select a past date.",variant:"destructive"}),p(void 0)):p(e)},S=(0,a.useMemo)(()=>{if(!m||!_||"package"===_.type)return[];let e=[],t=_.unitDuration||_.duration,r=(0,el.b)(m),s=new Date,a=(0,eo.X)(r,(0,el.b)(s));for(let s of ey){let i,n;let o=(0,ec.Qc)(s,"HH:mm",r),l=(0,ed.m)(o,t);if(a&&(0,en.C)(o))continue;let c="available";for(let e of y)if(e.startTime&&e.endTime){let t=new Date(e.startTime);if(o<new Date(e.endTime)&&l>t){c="booked",i=e;break}}if("booked"===c){e.push({display:`${(0,ei.WU)(o,"HH:mm")} - ${(0,ei.WU)(l,"HH:mm")}`,value:s,status:"booked",bookedMeta:i});continue}for(let e of N){let t=new Date(e.startISO);if(o<new Date(e.endISO)&&l>t){c="blocked",n=e;break}}e.push({display:`${(0,ei.WU)(o,"HH:mm")} - ${(0,ei.WU)(l,"HH:mm")}`,value:s,status:c,blockedMeta:n})}return e},[m,_,y,N]),E=async()=>{if(!e){t({title:"Login Required",description:"Please log in to book a lesson.",variant:"destructive"}),r.push("/login?redirect=/bookings");return}if(!_){t({title:"Selection Incomplete",description:"Please select a lesson type.",variant:"destructive"});return}if("package"!==_.type&&(!m||!x)){t({title:"Selection Incomplete",description:"Please select a date and time for your lesson.",variant:"destructive"});return}b(!0);try{let s=0===_.price,a="number"==typeof _.unitDuration?_.unitDuration:"number"==typeof _.duration?_.duration:60,i={date:m?(0,ei.WU)(m,"yyyy-MM-dd"):"N/A_PACKAGE",time:x||"N/A_PACKAGE",duration:a,lessonType:_.label,price:_.price,tutorId:"MahderNegashMamo",userId:e.uid,userName:e.displayName||"User",userEmail:e.email||"No Email",...h.trim()&&{paymentNote:h.trim()},isFreeTrial:s},{bookingId:n}=await eg(i);if(console.log("✅ Booking document created successfully.",{id:n}),s)r.push(`/bookings/success?booking_id=${n}&free_trial=true`);else{let r=_.value,s=Object.keys(ex).find(e=>e.toLowerCase().replace(/_/g,"")===r.toLowerCase().replace(/-/g,"")),a=s?ex[s]:void 0;if(!a||a.includes("YOUR_")||a.includes("price_free_trial")){t({title:"Payment Link Not Configured",description:"The payment link for this product has not been set up by the site administrator. Please contact support.",variant:"destructive",duration:9e3}),b(!1);return}let i=`https://sandbox-billing.paddle.com/checkout/buy/${a}?email=${encodeURIComponent(e.email||"")}&passthrough=${encodeURIComponent(JSON.stringify({booking_id:n}))}`;window.location.href=i}}catch(e){console.error("❌ Booking process failed:",e),e.message.includes("slot_already_booked")||e.message.includes("tutor_unavailable")?(t({title:"Booking Conflict",description:"This slot is no longer available. The schedule has been updated. Please select another time.",variant:"destructive",duration:9e3}),m&&C(m)):t({title:"Booking Failed",description:e.message||"Could not complete your booking. Please try again.",variant:"destructive",duration:9e3}),b(!1)}},I=_?.type==="package",q=(_?.price||0)>0;return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-primary/5 to-background",children:[s.jsx("header",{className:"bg-card border-b sticky top-0 z-40",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)(et.default,{href:"/",className:"flex items-center gap-2 text-muted-foreground hover:text-primary",children:[s.jsx(G.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Back to ABYLANG"})]}),s.jsx(ep.S,{})]})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[s.jsx(o.C,{className:"mb-4 bg-accent text-accent-foreground",children:"Book Your Lesson"}),s.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Start Your Amharic Journey"}),(0,s.jsxs)("p",{className:"text-xl text-muted-foreground",children:["Choose your lesson type and schedule with ",em.xK.name]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,s.jsxs)(n.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-xl text-foreground",children:[s.jsx(W.Z,{className:"w-5 h-5 text-primary"}),"Choose Your Lesson or Package"]}),s.jsx(n.SZ,{children:"Select the format that best fits your learning goals"})]}),s.jsx(n.aY,{children:s.jsx(Z,{value:d,onValueChange:e=>{u(e),f(void 0),p(void 0)},children:s.jsx("div",{className:"space-y-6",children:["individual","group","package"].map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-foreground mb-3 capitalize",children:["individual"===e?"Individual":e," Lessons"]}),s.jsx("div",{className:"space-y-4",children:c.filter(t=>t.type===e).map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(H,{value:e.value,id:e.value,className:"mt-1"}),s.jsx(z._,{htmlFor:e.value,className:"flex-1 cursor-pointer",children:(0,s.jsxs)("div",{className:`p-4 border rounded-lg hover:bg-accent/50 transition-colors ${d===e.value?"bg-accent border-primary ring-2 ring-primary":"border-border"}`,children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"mb-2 sm:mb-0",children:[(0,s.jsxs)("div",{className:"font-semibold text-lg text-foreground flex items-center gap-2",children:[e.label,0===e.price&&s.jsx(o.C,{variant:"secondary",className:"bg-green-500/10 text-green-700 dark:text-green-400",children:"Free Trial"}),"package"===e.type&&s.jsx(o.C,{variant:"secondary",className:"bg-purple-500/10 text-purple-700 dark:text-purple-400",children:"Package"}),"group"===e.type&&(0,s.jsxs)(o.C,{variant:"secondary",className:"bg-blue-500/10 text-blue-700 dark:text-blue-400",children:["Group (",e.minStudents,"-",e.maxStudents," people)"]})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["number"==typeof e.duration?`${e.duration} minutes`:e.duration," • ",e.description]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-primary",children:["$",e.price]}),e.originalPrice&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground line-through",children:["$",e.originalPrice]})]})]}),s.jsx("ul",{className:"grid md:grid-cols-2 gap-x-4 gap-y-2 mt-3 text-sm list-none p-0",children:e.features.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[s.jsx(Y.Z,{className:"w-4 h-4 text-primary flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:e})]},t))})]})})]},e.value))})]},e))})})})]}),!I&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-xl text-foreground",children:[s.jsx(X.Z,{className:"w-5 h-5 text-primary"}),"Select Date"]}),s.jsx(n.SZ,{children:"Choose an available date for your lesson."})]}),s.jsx(n.aY,{children:s.jsx(eb,{selectedDate:m,onDateSelect:D})})]}),m&&(0,s.jsxs)(n.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"text-xl text-foreground flex items-center gap-2",children:[s.jsx(V.Z,{className:"w-5 h-5 text-primary"}),"Select Time Slot"]}),(0,s.jsxs)(n.SZ,{children:["Available slots for ",(0,ei.WU)(m,"PPP"),". (Your local time)"]})]}),s.jsx(n.aY,{children:w?s.jsx("div",{className:"flex justify-center items-center h-24",children:s.jsx(eu.$,{})}):0===S.length?s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No available slots for this duration/date."}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(e=>s.jsx(ev.Y,{...e,isSelected:x===e.value,onClick:e=>f(e.value)},e.value))})})]})]}),I&&(0,s.jsxs)(n.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-xl text-foreground",children:[s.jsx(X.Z,{className:"w-5 h-5 text-primary"}),"Package Start Date (Optional)"]}),s.jsx(n.SZ,{children:"Select a preferred start date for your first lesson in the package. Subsequent lessons can be scheduled from your dashboard."})]}),s.jsx(n.aY,{children:s.jsx(eb,{selectedDate:m,onDateSelect:D})})]}),(0,s.jsxs)(n.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-xl text-foreground",children:[s.jsx(Q.Z,{className:"w-5 h-5 text-primary"}),q?"Payment Note (Optional)":"Learning Goals (Optional)"]}),s.jsx(n.SZ,{children:q?"Add a note for the tutor (e.g., your payment transaction ID or username).":`Tell ${em.xK.name.split(" ")[0]} about your specific learning objectives.`})]}),s.jsx(n.aY,{children:s.jsx(F.g,{placeholder:q?"e.g., PayPal Transaction ID: 123ABCXYZ":"e.g., conversational Amharic for family, basic reading/writing...",value:h,onChange:e=>g(e.target.value),rows:4,className:"resize-none"})})]})]}),s.jsx("div",{className:"lg:col-span-1",children:(0,s.jsxs)(n.Zb,{className:"shadow-lg sticky top-20",children:[s.jsx(n.Ol,{children:(0,s.jsxs)(n.ll,{className:"flex items-center gap-2 text-xl text-foreground",children:[s.jsx(K.Z,{className:"w-5 h-5 text-primary"}),"Your Tutor"]})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-accent rounded-full mx-auto mb-3 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl text-primary font-bold",children:em.xK.name.split(" ").map(e=>e[0]).join("")})}),s.jsx("h3",{className:"font-semibold text-foreground",children:em.xK.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:em.xK.shortIntro}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1 mt-2",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>s.jsx(J.Z,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},t)),s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"(Highly Rated)"})]})]}),(0,s.jsxs)("div",{className:"border-t border-border pt-4 space-y-3",children:[s.jsx("h4",{className:"font-semibold text-foreground",children:"Booking Summary"}),_&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Selected:"}),s.jsx("span",{className:"font-medium text-right text-foreground",children:_.label})]}),"number"==typeof _.duration&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),(0,s.jsxs)("span",{className:"font-medium text-foreground",children:[_.duration," minutes"]})]}),"package"===_.type&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Contains:"}),s.jsx("span",{className:"font-medium text-foreground",children:_.duration})]}),"package"===_.type&&"number"==typeof _.totalLessons&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Lessons:"}),s.jsx("span",{className:"font-medium text-foreground",children:_.totalLessons})]})]}),m&&!I&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium text-foreground",children:(0,ei.WU)(m,"PPP")})]}),m&&I&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Start Date:"}),s.jsx("span",{className:"font-medium text-foreground",children:(0,ei.WU)(m,"PPP")})]}),x&&!I&&(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Time:"}),s.jsx("span",{className:"font-medium text-foreground",children:`${(0,ei.WU)((0,ec.Qc)(x,"HH:mm",m||new Date),"HH:mm")} - ${(0,ei.WU)((0,ed.m)((0,ec.Qc)(x,"HH:mm",m||new Date),_?.unitDuration||_?.duration),"HH:mm")}`})]})]}),_&&(0,s.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{className:"text-foreground",children:"Total:"}),(0,s.jsxs)("span",{className:"text-primary",children:["$$",_.price]})]}),q&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-center mt-2 px-2 py-1 bg-accent rounded-md",children:[s.jsx(ee.Z,{className:"w-3 h-3 inline-block mr-1"}),"Secure payment processing via Paddle."]})]}),s.jsx("div",{className:"space-y-3 pt-2",children:(0,s.jsxs)(i.z,{className:"w-full",onClick:E,disabled:v||!_||"package"!==_.type&&(!m||!x)||"package"===_.type&&!m&&!h,children:[v?s.jsx(eu.$,{size:"sm",className:"mr-2"}):null,v?"Processing...":q?"Proceed to Payment":"Confirm Free Trial"]})}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1 text-center",children:[s.jsx("p",{children:"• Free cancellation up to 12 hours before."}),s.jsx("p",{children:"• Your spot is confirmed upon payment for paid lessons."})]})]})]})})]})]})]})}},23137:(e,t,r)=>{"use strict";r.d(t,{Y:()=>c});var s=r(10326),a=r(91664),i=r(82631),n=r(51223);let o=(0,r(9664).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var l=r(28096);function c({value:e,display:t,status:r,bookedMeta:c,blockedMeta:d,onClick:u,isSelected:m=!1,isAdminView:p=!1}){let x="available"===r||p&&"blocked"===r,f=s.jsx(a.z,{variant:m?"default":"available"===r?"outline":"secondary",className:(0,n.cn)("w-full truncate","available"===r&&"hover:bg-accent","blocked"===r&&"bg-destructive/10 text-destructive-foreground hover:bg-destructive/20 font-semibold","booked"===r&&"bg-blue-600/10 text-blue-800 dark:text-blue-300 border-blue-600/20 hover:bg-blue-600/20 line-through",!x&&"cursor-not-allowed"),disabled:!x,onClick:()=>x&&u&&u({value:e,display:t,status:r,bookedMeta:c,blockedMeta:d,isSelected:m,isAdminView:p}),children:(()=>{switch(r){case"blocked":return(0,s.jsxs)("span",{className:"flex items-center",children:[s.jsx(o,{className:"w-3 h-3 mr-1.5"}),"Busy"]});case"booked":return p?`Booked: ${c?.userName}`:"Booked";default:return t}})()});return"available"!==r?s.jsx(i.pn,{delayDuration:100,children:(0,s.jsxs)(i.u,{children:[s.jsx(i.aJ,{asChild:!0,children:f}),(0,s.jsxs)(i._v,{children:["blocked"===r&&(0,s.jsxs)("div",{className:"flex items-start gap-2 p-1",children:[s.jsx(o,{className:"w-4 h-4 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-semibold",children:"Tutor Unavailable"}),d?.note&&"Admin Block"!==d.note&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Note: ",d.note]})]})]}),"booked"===r&&(0,s.jsxs)("div",{className:"flex items-start gap-2 p-1",children:[s.jsx(l.Z,{className:"w-4 h-4 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-semibold",children:"Slot Already Booked"}),p&&c?.userName&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Student: ",c.userName]})]})]})]})]})}):f}},38443:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(10326);r(17577);var a=r(79360),i=r(51223);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return s.jsx("div",{className:(0,i.cn)(n({variant:t}),e),...r})}},44794:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(10326),a=r(17577),i=r(34478),n=r(79360),o=r(51223);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,o.cn)(l(),e),...t}));c.displayName=i.f.displayName},45800:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var s=r(10326),a=r(46721),i=r(51223);function n({className:e,size:t="md"}){return s.jsx(a.Z,{className:(0,i.cn)("animate-spin text-primary",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t],e)})}},82015:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var s=r(10326),a=r(17577),i=r(51223);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Textarea"},82631:(e,t,r)=>{"use strict";r.d(t,{_v:()=>d,aJ:()=>c,pn:()=>o,u:()=>l});var s=r(10326),a=r(17577),i=r(39313),n=r(51223);let o=i.zt,l=i.fC,c=i.xz,d=a.forwardRef(({className:e,sideOffset:t=4,...r},a)=>s.jsx(i.VY,{ref:a,sideOffset:t,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));d.displayName=i.VY.displayName},19740:(e,t,r)=>{"use strict";r.d(t,{Pj:()=>o,lm:()=>n,p2:()=>l});var s=r(90445),a=r(46951);let i="/api";async function n(e){let t=(0,a.WU)(e,"yyyy-MM-dd");try{let e=await fetch(`${i}/availability/get?date=${t}`);if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to parse error response"}));throw console.error("Server responded with an error:",e.status,t),Error(t.error||`Failed to fetch availability: ${e.statusText}`)}let r=await e.json();if(!r.success)throw console.error("Server logic error:",r),Error(r.error||"Failed to retrieve availability data from the server.");return{bookings:r.data?.bookings||[],timeOff:r.data?.timeOff||[]}}catch(e){throw console.error("Network or parsing error in getAvailability:",e),Error(`Could not fetch schedule. Please check your connection and try again. Details: ${e.message}`)}}async function o(e){let t=s.I.currentUser;if(!t)throw Error("Authentication required to block a time slot.");let r=await t.getIdToken(),a=await fetch(`${i}/availability/block`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(e)}),n=await a.json();if(!a.ok||!n.success)throw Error(n.error||"Failed to block time slot.");return n.data}async function l(e){let t=s.I.currentUser;if(!t)throw Error("Authentication required to unblock a time slot.");let r=await t.getIdToken(),a=await fetch(`${i}/availability/unblock`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(e)}),n=await a.json();if(!a.ok||!n.success)throw Error(n.error||"Failed to unblock time slot.");return n.data}},61523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=r(68570);let a=(0,s.createProxy)(String.raw`/home/user/studio/src/app/bookings/page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,s.createProxy)(String.raw`/home/user/studio/src/app/bookings/page.tsx#default`)},34478:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var s=r(17577),a=r(45226),i=r(10326),n=s.forwardRef((e,t)=>(0,i.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=n},53405:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var s=r(17577);function a(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},34075:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});var s=r(71271),a=r(99276),i=r(79740);function n(e,t){return function(e,t){let r=+(0,s.Q)(e);return(0,a.L)(e,r+t)}(e,t*i.yJ)}},87396:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var s=r(71271);function a(e,t){return+(0,s.Q)(e)==+(0,s.Q)(t)}},13341:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var s=r(71271);function a(e){return+(0,s.Q)(e)<Date.now()}},9921:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},60883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},72669:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,4623,1970,4414,4119,5330],()=>r(59478));module.exports=s})();
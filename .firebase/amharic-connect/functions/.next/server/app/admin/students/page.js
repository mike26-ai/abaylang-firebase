(()=>{var e={};e.id=138,e.ids=[138],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},40886:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(85355),s(96417),s(96873),s(7629),s(12523);var r=s(23191),n=s(88716),a=s(37922),i=s.n(a),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["admin",{children:["students",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85355)),"/home/user/studio/src/app/admin/students/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,96417)),"/home/user/studio/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,96873)),"/home/user/studio/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"/home/user/studio/src/app/error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,11930)),"/home/user/studio/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"/home/user/studio/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/user/studio/src/app/admin/students/page.tsx"],u="/admin/students/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/students/page",pathname:"/admin/students",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},41784:(e,t,s)=>{Promise.resolve().then(s.bind(s,7574))},65442:(e,t,s)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(17577),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,l=r.useLayoutEffect,d=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!n(e,s)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),r=a({inst:{value:s,getSnapshot:t}}),n=r[0].inst,o=r[1];return l(function(){n.value=s,n.getSnapshot=t,c(n)&&o({inst:n})},[e,s,t]),i(function(){return c(n)&&o({inst:n}),e(function(){c(n)&&o({inst:n})})},[e]),d(s),s};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:o},94095:(e,t,s)=>{"use strict";e.exports=s(65442)},7574:(e,t,s)=>{"use strict";s.d(t,{StudentsManager:()=>b});var r=s(10326),n=s(17577),a=s(76),i=s(90445),l=s(41156),d=s(11905),c=s(38443),o=s(91664),u=s(10143),m=s(23019),h=s(10036),x=s(57523),p=s(79460),f=s(21123);let j=(0,s(9664).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var g=s(94629),v=s(46951),N=s(84097),y=s(45800),w=s(29752);function b(){let[e,t]=(0,n.useState)([]),[s,b]=(0,n.useState)(!0),{toast:S}=(0,N.pm)(),C=async()=>{b(!0);try{let e=await i.I.currentUser?.getIdToken();if(!e)throw Error("User not authenticated");let s=await fetch("/api/admin/students",{headers:{Authorization:`Bearer ${e}`}}),r=await s.json();if(!s.ok||!r.success)throw Error(r.error||"Failed to fetch students from server.");let n=r.data.map(e=>({...e,createdAt:(0,g.D)(e.createdAt)}));t(n)}catch(e){console.error("Error fetching students:",e),S({title:"Error",description:e.message||"Could not fetch student data.",variant:"destructive"})}finally{b(!1)}},q=e=>{if(!e)return"U";let t=e.split(" ");return t.length>1&&t[0]&&t[t.length-1]?`${t[0][0]}${t[t.length-1][0]}`.toUpperCase():e.substring(0,2).toUpperCase()},k=async(e,t)=>{try{let s=(0,a.JU)(i.db,"users",e);await (0,a.r7)(s,{role:t}),S({title:"Role Updated",description:`User role changed to ${t}.`}),C()}catch(e){console.error("Error updating user role:",e),S({title:"Error",description:"Could not update user role.",variant:"destructive"})}};return s?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(y.$,{size:"lg"})}):0===e.length?r.jsx("p",{className:"text-muted-foreground",children:"No students found."}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:(0,r.jsxs)(l.iA,{children:[r.jsx(l.xD,{children:(0,r.jsxs)(l.SC,{children:[r.jsx(l.ss,{children:"Name"}),r.jsx(l.ss,{children:"Email"}),r.jsx(l.ss,{children:"Role"}),r.jsx(l.ss,{children:"Amharic Level"}),r.jsx(l.ss,{children:"Joined On"}),r.jsx(l.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(l.RM,{children:e.map(e=>(0,r.jsxs)(l.SC,{children:[r.jsx(l.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(d.qE,{className:"h-9 w-9",children:[r.jsx(d.F$,{src:e.photoURL||void 0,alt:e.name,"data-ai-hint":"user avatar"}),r.jsx(d.Q5,{children:q(e.name)})]}),r.jsx("span",{className:"font-medium",children:e.name})]})}),r.jsx(l.pj,{children:e.email}),r.jsx(l.pj,{children:r.jsx(c.C,{variant:"admin"===e.role?"destructive":"secondary",children:e.role.charAt(0).toUpperCase()+e.role.slice(1)})}),r.jsx(l.pj,{children:r.jsx(c.C,{variant:"outline",children:e.amharicLevel?.replace(/-/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")||"N/A"})}),r.jsx(l.pj,{children:(0,v.WU)(e.createdAt,"PP")}),r.jsx(l.pj,{className:"text-right",children:(0,r.jsxs)(u.h_,{children:[r.jsx(u.$F,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:"Open menu"}),r.jsx(m.Z,{className:"h-4 w-4"})]})}),(0,r.jsxs)(u.AW,{align:"end",children:[r.jsx(u.Ju,{children:"User Actions"}),(0,r.jsxs)(u.Xi,{disabled:!0,children:[r.jsx(h.Z,{className:"mr-2 h-4 w-4"})," Send Email (Soon)"]}),(0,r.jsxs)(u.Xi,{disabled:!0,children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"})," View Bookings (Soon)"]}),(0,r.jsxs)(u.Xi,{disabled:!0,children:[r.jsx(p.Z,{className:"mr-2 h-4 w-4"})," View Progress (Soon)"]}),r.jsx(u.VD,{}),r.jsx(u.Ju,{children:"Change Role"}),(0,r.jsxs)(u.Xi,{onClick:()=>k(e.uid,"admin"),disabled:"admin"===e.role,className:"admin"===e.role?"":"cursor-pointer",children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4 text-destructive"})," Make Admin"]}),(0,r.jsxs)(u.Xi,{onClick:()=>k(e.uid,"student"),disabled:"student"===e.role,className:"student"===e.role?"":"cursor-pointer",children:[r.jsx(j,{className:"mr-2 h-4 w-4 text-primary"})," Make Student"]})]})]})})]},e.uid))})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:e.map(e=>(0,r.jsxs)(w.Zb,{className:"shadow-md",children:[r.jsx(w.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(d.qE,{className:"h-10 w-10",children:[r.jsx(d.F$,{src:e.photoURL||void 0,alt:e.name,"data-ai-hint":"user avatar"}),r.jsx(d.Q5,{children:q(e.name)})]}),(0,r.jsxs)("div",{children:[r.jsx(w.ll,{className:"text-lg",children:e.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.email})]})]}),(0,r.jsxs)(u.h_,{children:[r.jsx(u.$F,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:"Open menu"}),r.jsx(m.Z,{className:"h-4 w-4"})]})}),(0,r.jsxs)(u.AW,{align:"end",children:[r.jsx(u.Ju,{children:"User Actions"}),(0,r.jsxs)(u.Xi,{disabled:!0,children:[r.jsx(h.Z,{className:"mr-2 h-4 w-4"})," Send Email (Soon)"]}),r.jsx(u.VD,{}),r.jsx(u.Ju,{children:"Change Role"}),(0,r.jsxs)(u.Xi,{onClick:()=>k(e.uid,"admin"),disabled:"admin"===e.role,children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4 text-destructive"})," Make Admin"]}),(0,r.jsxs)(u.Xi,{onClick:()=>k(e.uid,"student"),disabled:"student"===e.role,children:[r.jsx(j,{className:"mr-2 h-4 w-4 text-primary"})," Make Student"]})]})]})]})}),(0,r.jsxs)(w.aY,{className:"space-y-3 text-sm border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium text-muted-foreground",children:"Role:"}),r.jsx(c.C,{variant:"admin"===e.role?"destructive":"secondary",children:e.role})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium text-muted-foreground",children:"Level:"}),r.jsx(c.C,{variant:"outline",children:e.amharicLevel?.replace(/-/g," ")||"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium text-muted-foreground",children:"Joined:"}),r.jsx("span",{children:(0,v.WU)(e.createdAt,"PP")})]})]})]},e.uid))})]})}},11905:(e,t,s)=>{"use strict";s.d(t,{qE:()=>b,Q5:()=>C,F$:()=>S});var r=s(10326),n=s(17577),a=s(93095),i=s(55049),l=s(65819),d=s(45226),c=s(94095);function o(){return()=>{}}var u="Avatar",[m,h]=(0,a.b)(u),[x,p]=m(u),f=n.forwardRef((e,t)=>{let{__scopeAvatar:s,...a}=e,[i,l]=n.useState("idle");return(0,r.jsx)(x,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:(0,r.jsx)(d.WV.span,{...a,ref:t})})});f.displayName=u;var j="AvatarImage",g=n.forwardRef((e,t)=>{let{__scopeAvatar:s,src:a,onLoadingStatusChange:u=()=>{},...m}=e,h=p(j,s),x=function(e,{referrerPolicy:t,crossOrigin:s}){let r=(0,c.useSyncExternalStore)(o,()=>!0,()=>!1),a=n.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[d,u]=n.useState(()=>y(i,e));return(0,l.b)(()=>{u(y(i,e))},[i,e]),(0,l.b)(()=>{let e=e=>()=>{u(e)};if(!i)return;let r=e("loaded"),n=e("error");return i.addEventListener("load",r),i.addEventListener("error",n),t&&(i.referrerPolicy=t),"string"==typeof s&&(i.crossOrigin=s),()=>{i.removeEventListener("load",r),i.removeEventListener("error",n)}},[i,s,t]),d}(a,m),f=(0,i.W)(e=>{u(e),h.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==x&&f(x)},[x,f]),"loaded"===x?(0,r.jsx)(d.WV.img,{...m,ref:t,src:a}):null});g.displayName=j;var v="AvatarFallback",N=n.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:a,...i}=e,l=p(v,s),[c,o]=n.useState(void 0===a);return n.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>o(!0),a);return()=>window.clearTimeout(e)}},[a]),c&&"loaded"!==l.imageLoadingStatus?(0,r.jsx)(d.WV.span,{...i,ref:t}):null});function y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}N.displayName=v;var w=s(51223);let b=n.forwardRef(({className:e,...t},s)=>r.jsx(f,{ref:s,className:(0,w.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));b.displayName=f.displayName;let S=n.forwardRef(({className:e,...t},s)=>r.jsx(g,{ref:s,className:(0,w.cn)("aspect-square h-full w-full",e),...t}));S.displayName=g.displayName;let C=n.forwardRef(({className:e,...t},s)=>r.jsx(N,{ref:s,className:(0,w.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));C.displayName=N.displayName},85355:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,metadata:()=>u});var r=s(19510),n=s(68570);let a=(0,n.createProxy)(String.raw`/home/user/studio/src/components/admin/students-manager.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let d=(0,n.createProxy)(String.raw`/home/user/studio/src/components/admin/students-manager.tsx#StudentsManager`);var c=s(93804),o=s(31804);let u={title:"Manage Students - Admin",description:"View and manage registered students."};function m(){return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("header",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:r.jsx(o.Z,{className:"h-7 w-7 text-primary"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Manage Students"}),r.jsx("p",{className:"text-muted-foreground",children:"View registered users and their details."})]})]}),(0,r.jsxs)(c.Zb,{className:"shadow-xl",children:[(0,r.jsxs)(c.Ol,{children:[r.jsx(c.ll,{children:"All Students"}),r.jsx(c.SZ,{children:"A list of all users registered on ABYLANG."})]}),r.jsx(c.aY,{children:r.jsx(d,{})})]})]})}},94629:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});var r=s(79740);function n(e,t){let s,n;let h=t?.additionalDigits??2,x=function(e){let t;let s={},r=e.split(a.dateTimeDelimiter);if(r.length>2)return s;if(/:/.test(r[0])?t=r[0]:(s.date=r[0],t=r[1],a.timeZoneDelimiter.test(s.date)&&(s.date=e.split(a.timeZoneDelimiter)[0],t=e.substr(s.date.length,e.length))),t){let e=a.timezone.exec(t);e?(s.time=t.replace(e[1],""),s.timezone=e[1]):s.time=t}return s}(e);if(x.date){let e=function(e,t){let s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(s);if(!r)return{year:NaN,restDateString:""};let n=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?n:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(x.date,h);s=function(e,t){if(null===t)return new Date(NaN);let s=e.match(i);if(!s)return new Date(NaN);let r=!!s[4],n=c(s[1]),a=c(s[2])-1,l=c(s[3]),d=c(s[4]),o=c(s[5])-1;if(r)return d>=1&&d<=53&&o>=0&&o<=6?function(e,t,s){let r=new Date(0);r.setUTCFullYear(e,0,4);let n=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+s+1-n)),r}(t,d,o):new Date(NaN);{let e=new Date(0);return a>=0&&a<=11&&l>=1&&l<=(u[a]||(m(t)?29:28))&&n>=1&&n<=(m(t)?366:365)?(e.setUTCFullYear(t,a,Math.max(n,l)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);let p=s.getTime(),f=0;if(x.time&&isNaN(f=function(e){let t=e.match(l);if(!t)return NaN;let s=o(t[1]),n=o(t[2]),a=o(t[3]);return(24===s?0===n&&0===a:a>=0&&a<60&&n>=0&&n<60&&s>=0&&s<25)?s*r.vh+n*r.yJ+1e3*a:NaN}(x.time)))return new Date(NaN);if(x.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;let t=e.match(d);if(!t)return 0;let s="+"===t[1]?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return a>=0&&a<=59?s*(n*r.vh+a*r.yJ):NaN}(x.timezone)))return new Date(NaN)}else{let e=new Date(p+f),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(p+f+n)}let a={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e){return e?parseInt(e):1}function o(e){return e&&parseFloat(e.replace(",","."))||0}let u=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}},23019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(9664).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},31804:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(72538).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,4623,1970,512,5330,2498],()=>s(40886));module.exports=r})();
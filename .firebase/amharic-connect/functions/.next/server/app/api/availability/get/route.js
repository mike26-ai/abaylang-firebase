"use strict";(()=>{var e={};e.id=5421,e.ids=[5421],e.modules={92509:e=>{e.exports=require("firebase-admin")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5142:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>w,patchFetch:()=>x,requestAsyncStorage:()=>k,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v});var r={};a.r(r),a.d(r,{GET:()=>m});var i=a(49303),o=a(88716),n=a(60670),s=a(87070),d=a(21067),l=a(82421),c=a(49396),h=a(16727),p=a(79109);a(95528);try{(0,l.xH)()}catch(e){console.error("Firebase Admin SDK initialization error in availability/service.ts",e)}async function y(e,t){let a=(0,c.Qc)(t,"yyyy-MM-dd",new Date),r=(0,h.b)(a),i=function(e){let t=(0,p.Q)(e);return t.setHours(23,59,59,999),t}(a),o=[],n=[];try{let t=l.iW.collection("bookings").where("tutorId","==",e).where("status","in",["confirmed","awaiting-payment","payment-pending-confirmation"]).where("startTime",">=",r).where("startTime","<=",i);o=(await t.get()).docs.map(e=>({id:e.id,...e.data(),startTime:e.data().startTime?.toDate().toISOString(),endTime:e.data().endTime?.toDate().toISOString(),createdAt:e.data().createdAt?.toDate().toISOString()}))}catch(e){console.error("API Service Error: Failed to fetch bookings:",e.message)}try{let t=l.iW.collection("timeOff").where("tutorId","==",e).where("startISO",">=",r.toISOString()).where("startISO","<=",i.toISOString());n=(await t.get()).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate().toISOString()}))}catch(e){console.error("API Service Error: Failed to fetch timeOff blocks:",e.message)}return{bookings:o,timeOff:n}}let u=d.Ry({date:d.Z_().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format.")});async function m(e){let{searchParams:t}=new URL(e.url),a=Object.fromEntries(t.entries());try{let e=u.safeParse(a);if(!e.success)return s.NextResponse.json({success:!1,error:"Invalid input",details:e.error.flatten().fieldErrors},{status:400});let{date:t}=e.data,r=await y("MahderNegashMamo",t);return s.NextResponse.json({success:!0,data:r})}catch(e){return console.error("API Error (/availability/get):",e),s.NextResponse.json({success:!1,error:"Failed to fetch availability data",details:e?.message},{status:500})}}let g=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/availability/get/route",pathname:"/api/availability/get",filename:"route",bundlePath:"app/api/availability/get/route"},resolvedPagePath:"/home/user/studio/src/app/api/availability/get/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:k,staticGenerationAsyncStorage:v,serverHooks:f}=g,w="/api/availability/get/route";function x(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}},95528:(e,t,a)=>{a.d(t,{Nj:()=>d,Ru:()=>l,xK:()=>s});var r=a(31804),i=a(72538);(0,i.Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),(0,i.Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),(0,i.Z)("LibraryBig",[["rect",{width:"8",height:"18",x:"3",y:"3",rx:"1",key:"oynpb5"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z",key:"1qboyk"}]]),(0,i.Z)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),(0,i.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var o=a(17450);(0,i.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),(0,i.Z)("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),(0,i.Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),(0,i.Z)("SquareChartGantt",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 8h7",key:"kbo1nt"}],["path",{d:"M8 12h6",key:"ikassy"}],["path",{d:"M11 16h5",key:"oq65wt"}]]),(0,i.Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var n=a(80027);r.Z,o.Z,r.Z,n.Z;let s={name:"Mahder Negash Mamo",bio:"Experienced Amharic teacher who makes language learning fun, simple, and interactive. Join me for easy lessons packed with culture and conversation!",shortIntro:"Professional Amharic Tutor for Learners Worldwide",teachingStyle:"My teaching style is patient, interactive, and tailored to each student's pace and goals. I use a mix of conversational practice, structured exercises, and cultural insights to make learning both effective and enjoyable.",services:["1-on-1 Personalized Lessons","Group Conversation Classes","Beginner to Advanced Levels","Accent & Pronunciation Coaching"],languages:["Amharic","English"],experience:"5+ years",imageUrl:"https://picsum.photos/400/400",dataAiHint:"tutor portrait",videoUrl:"https://www.youtube.com/embed/your_video_id_here"},d=process.env.NEXT_PUBLIC_ADMIN_EMAIL||"mahdernmamo@gmail.com",l="mahdernmamo@gmail.com"},82421:(e,t,a)=>{a.d(t,{CZ:()=>d,EK:()=>o,iW:()=>s,xH:()=>n});var r=a(92509),i=a.n(r);let o=i().firestore.Timestamp;function n(){if(i().apps.length>0)return i().app();let e={projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:(process.env.FIREBASE_PRIVATE_KEY||"").replace(/\\n/g,"\n")};if(!e.projectId||!e.clientEmail||!e.privateKey){let e="CRITICAL: Firebase Admin SDK credentials are not set correctly in environment variables. Check your .env file or hosting configuration.";throw console.error(e),Error(e)}try{let t=i().initializeApp({credential:i().credential.cert(e)});return console.log("Firebase Admin SDK initialized successfully."),t}catch(e){if(console.error("CRITICAL: Firebase admin initialization error:",e.message),"app/invalid-credential"===e.code)throw Error("Could not initialize Firebase Admin SDK. The provided credentials are invalid or malformed.");throw Error("Could not initialize Firebase Admin SDK. Please check server logs for details.")}}n();let s=i().firestore(),d=i().auth()},16727:(e,t,a)=>{a.d(t,{b:()=>i});var r=a(79109);function i(e){let t=(0,r.Q)(e);return t.setHours(0,0,0,0),t}},72538:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(71159);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:s="",children:d,iconNode:l,...c},h)=>(0,r.createElement)("svg",{ref:h,...n,width:t,height:t,stroke:e,strokeWidth:i?24*Number(a)/Number(t):a,className:o("lucide",s),...c},[...l.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(d)?d:[d]])),d=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...n},d)=>(0,r.createElement)(s,{ref:d,iconNode:t,className:o(`lucide-${i(e)}`,a),...n}));return a.displayName=`${e}`,a}},17450:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(72538).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},80027:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(72538).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},31804:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(72538).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972,1067,9396],()=>a(5142));module.exports=r})();